"use strict";(self.webpackChunkboilerplate=self.webpackChunkboilerplate||[]).push([[849],{8849:(G,O,i)=>{i.r(O),i.d(O,{CreateModule:()=>l});var x=i(4238),h=i(495),y=i(3336),N=i(4466),r=i(4006),g=i(2722),T=i(8720),c=(()=>{return(e=c||(c={})).edit="edit",e.new="new",c;var e})(),Z=i(8023),U=i(5429),p=i(2619);let w=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((o,n)=>o+((n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_"),"");var t=i(4650),Y=i(9653),u=i(6895),A=i(4144),m=i(9549),C=i(4859),F=i(8372);function S(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Option is required "),t.qZA())}function D(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const f=t.oxw().index,b=t.oxw();return t.KtG(b.onDeleteOption(f))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove"),t.qZA()()}}function E(e,o){if(1&e&&(t.TgZ(0,"div",7)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",8)(4,"mat-label"),t._uU(5,"Option"),t.qZA(),t._UZ(6,"input",9),t.YNc(7,S,2,0,"mat-error",10),t.qZA(),t.YNc(8,D,3,0,"button",11),t.qZA()),2&e){const n=o.$implicit,s=o.index;t.xp6(2),t.hij("",s+1,"."),t.xp6(4),t.Q6J("formControlName",s),t.xp6(1),t.Q6J("ngIf",n.hasError("required")),t.xp6(1),t.Q6J("ngIf",s>1)}}const P={provide:r.JU,useExisting:(0,t.Gpc)(()=>a),multi:!0};class a extends T.p{constructor(o){super(),this.fb=o}get options(){return this.form.get("options")}onAddOption(){this.options.push(this.fb.control("",r.kI.required))}onDeleteOption(o){this.options.removeAt(o)}writeValue(o){const n=o.map(s=>this.fb.control(s,r.kI.required));this.form=this.fb.group({options:this.fb.array(n)})}registerOnChange(o){this.form.valueChanges.pipe((0,g.R)(this.destroyed$),(0,F.b)(p.Y1)).subscribe(n=>{o(this.form.valid?[...n.options]:"")})}registerOnTouched(o){this.onTouched=o}}function j(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Text is required "),t.qZA())}function R(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Max length is 255 symbols "),t.qZA())}function _(e,o){if(1&e&&(t.TgZ(0,"mat-radio-button",12),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const n=o.$implicit;t.Q6J("name",n)("value",n),t.xp6(1),t.hij(" ",t.lcZ(2,3,n)," ")}}function V(e,o){1&e&&t._UZ(0,"app-options-control",13)}a.\u0275fac=function(o){return new(o||a)(t.Y36(r.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-options-control"]],features:[t._Bn([P]),t.qOj],decls:11,vars:2,consts:[[1,"inner"],[3,"formGroup"],["formArrayName","options"],[1,"label"],["class","option",4,"ngFor","ngForOf"],["mat-flat-button","","type","button","color","","aria-label","Add a new hobby button",1,"add",3,"click"],[1,"plus"],[1,"option"],[1,"field"],["matInput","","type","text",3,"formControlName"],[4,"ngIf"],["mat-icon-button","","class","remove","type","button","color","accent","aria-label","Add a new hobby",3,"click",4,"ngIf"],["mat-icon-button","","type","button","color","accent","aria-label","Add a new hobby",1,"remove",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"p",3),t._uU(4,"Add at least two answer options:"),t.qZA(),t.TgZ(5,"div",0),t.YNc(6,E,9,4,"div",4),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.onAddOption()}),t._uU(8," Add option "),t.TgZ(9,"mat-icon",6),t._uU(10,"add"),t.qZA()()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("ngForOf",n.options.controls))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.CE,A.Nt,m.KE,m.hX,m.TO,C.lW,C.RK,y.Hw],styles:[".field[_ngcontent-%COMP%]{width:85%}.option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}"]});class d extends T.p{constructor(o,n,s){super(),this.fb=o,this.router=n,this.store=s,this.types=p.j$,this.mode=this.router.routerState.snapshot.url.split("/")[1],this.storedQuestion$=this.store.select(U.NK)}ngOnInit(){this.storedQuestion$.pipe((0,g.R)(this.destroyed$)).subscribe(o=>this.questionData=o),this.form=this.fb.group({type:[this.questionData.type,r.kI.required],text:[this.questionData.text,[r.kI.required,r.kI.maxLength(p.Vb)]]}),this.manageOptionsControl(this.type.value),this.type.valueChanges.pipe((0,g.R)(this.destroyed$)).subscribe(o=>{this.manageOptionsControl(o)})}manageOptionsControl(o){p.N1.includes(o)?this.addOptionsControl():this.form.removeControl("options")}addOptionsControl(){this.form.addControl("options",this.fb.control("options"in this.questionData?this.questionData.options:p.DW,[r.kI.required,this.emptyValidator()]))}get type(){return this.form.get("type")}onSubmit(){if(this.mode===c.new){const o={...this.form.value,id:w(),createdAt:Date.now(),answered:!1,answer:null};this.store.dispatch(Z.Q.addQuestion({question:o}))}else{const o=((e,o)=>({...this.form.value,id:this.questionData.id,createdAt:Date.now(),answered:!1,answer:null}))();this.store.dispatch(Z.Q.updateQuestion({question:o}))}this.router.navigate(["/"])}emptyValidator(){return o=>o.value.includes("")?{forbiddenName:{value:o.value}}:null}}d.\u0275fac=function(o){return new(o||d)(t.Y36(r.qu),t.Y36(x.F0),t.Y36(Y.yh))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-create"]],features:[t.qOj],decls:17,vars:7,consts:[[1,"wrapper"],[1,"form",3,"formGroup","ngSubmit"],[1,"inner"],[1,"label"],[1,"open"],["matInput","","formControlName","text","placeholder","Type your question here ...",1,"textarea"],[4,"ngIf"],["id","radio-group-label",1,"label"],["formControlName","type","aria-labelledby","radio-group-label","aria-label","Select a question type"],[3,"name","value",4,"ngFor","ngForOf"],["formControlName","options",4,"ngIf"],["mat-flat-button","","type","submit","color","accent",1,"submit",3,"disabled"],[3,"name","value"],["formControlName","options"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(2,"div",2)(3,"p",3),t._uU(4,"Your question:"),t.qZA(),t.TgZ(5,"mat-form-field",4),t._UZ(6,"textarea",5),t.YNc(7,j,2,0,"mat-error",6),t.YNc(8,R,2,0,"mat-error",6),t.qZA()(),t.TgZ(9,"div",2)(10,"label",7),t._uU(11,"Choose a question type, please: "),t.qZA(),t.TgZ(12,"mat-radio-group",8),t.YNc(13,_,3,5,"mat-radio-button",9),t.qZA()(),t.YNc(14,V,1,0,"app-options-control",10),t.TgZ(15,"button",11),t._uU(16),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngIf",n.form.controls.text.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.controls.text.hasError("maxlength")),t.xp6(5),t.Q6J("ngForOf",n.types),t.xp6(1),t.Q6J("ngIf","single"===n.type.value||"multiple"===n.type.value),t.xp6(1),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.hij(" ","new"===n.mode?"Create":"Edit"," "))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,A.Nt,m.KE,m.TO,C.lW,h.VQ,h.U0,a,u.rS],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%;padding:70px 0;min-height:100vh;background-color:#bd1e51}.inner[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{width:70%;max-width:700px;display:flex;flex-direction:column;gap:30px;margin:0 auto;padding:30px;border-radius:5px;background-color:#fff}.label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px}.textarea[_ngcontent-%COMP%]{min-height:150px}.add[_ngcontent-%COMP%]{background-color:#f5f5f5}.plus[_ngcontent-%COMP%]{color:#ffd740}.submit[_ngcontent-%COMP%]{width:200px;height:50px;margin-left:auto}"]});const $=[{path:"",component:d}];class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[x.Bz.forChild($),N.m,y.Ps,h.Fk]})}}]);